<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>NENE HELPER</title>
    <script type="text/javascript" src="/eel.js"></script>
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        /* ìŠ¤íƒ€ì¼ ìœ ì§€ */
        :root {
            --bg-body: #181818;
            --bg-sidebar: #212121;
            --bg-card: #2b2b2b;
            --bg-console: #000000;
            --accent-blue: #3ea6ff;
            --accent-green: #2ba640;
            --accent-red: #f44336;
            --accent-purple: #e040fb;
            --accent-gold: #ffd700;
            --accent-orange: #ff9800;
            --accent-cyan: #00bcd4;
            /* ì •ë³´ íƒ­ìš© */
            --melon: #00e676;
            --text-main: #ffffff;
            --text-sub: #aaaaaa;
            --border: #333333;
        }

        * {
            box-sizing: border-box;
            user-select: none;
            outline: none;
        }

        body {
            margin: 0;
            background: var(--bg-body);
            color: var(--text-main);
            font-family: 'Pretendard', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
        }

        .sidebar {
            width: 240px;
            background: var(--bg-sidebar);
            display: flex;
            flex-direction: column;
            border-right: 1px solid #2a2a2a;
        }

        .logo-area {
            padding: 30px 20px;
            font-weight: 900;
            font-size: 20px;
            color: var(--accent-blue);
            letter-spacing: 1px;
        }

        .server-list {
            flex: 1;
            padding: 0;
            overflow-y: auto;
        }

        .server-item {
            padding: 15px 20px;
            cursor: pointer;
            border-left: 4px solid transparent;
            transition: 0.2s;
        }

        .server-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .server-item.active {
            background: #2a2a2a;
            border-left-color: var(--accent-blue);
        }

        .server-item h4 {
            margin: 0;
            font-size: 15px;
            color: #fff;
        }

        .server-item p {
            margin: 0;
            font-size: 12px;
            color: #777;
        }

        .sidebar-footer {
            padding: 15px;
            border-top: 1px solid #2a2a2a;
            display: flex;
            gap: 10px;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            background: #2a2a2a;
            border: 1px solid #333;
            color: #888;
            border-radius: 8px;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-new {
            flex: 1;
            font-size: 13px;
            font-weight: bold;
            background: var(--accent-green);
            color: #fff;
            gap: 5px;
        }

        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .empty-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-body);
            z-index: 50;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #444;
        }

        .empty-screen i {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .main-content-wrapper {
            display: flex;
            flex-direction: column;
            height: 100%;
            display: none;
        }

        .main-content-wrapper.active {
            display: flex;
        }

        .header {
            height: 70px;
            background: var(--bg-body);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            border-bottom: 1px solid #2a2a2a;
        }

        .status-badge {
            background: rgba(43, 166, 64, 0.15);
            border: 1px solid var(--accent-green);
            color: var(--accent-green);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .dot {
            width: 8px;
            height: 8px;
            background: var(--accent-green);
            border-radius: 50%;
        }

        .status-badge.offline {
            background: rgba(244, 67, 54, 0.15);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .status-badge.offline .dot {
            background: var(--accent-red);
        }

        .tabs {
            display: flex;
            padding: 0 30px;
            border-bottom: 1px solid #2a2a2a;
            background: var(--bg-body);
        }

        .tab {
            padding: 15px 5px;
            margin-right: 25px;
            color: #666;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            border-bottom: 2px solid transparent;
            transition: 0.2s;
        }

        .tab.active {
            color: var(--accent-blue);
            border-bottom-color: var(--accent-blue);
        }

        .tab.danger {
            color: var(--accent-red);
        }

        .tab.danger.active {
            border-bottom-color: var(--accent-red);
            color: var(--accent-red);
        }

        .tab.broadcast.active {
            color: var(--accent-purple);
            border-bottom-color: var(--accent-purple);
        }

        .tab.plugins.active {
            color: var(--accent-orange);
            border-bottom-color: var(--accent-orange);
        }

        /* [ì¶”ê°€ë¨] ì •ë³´ íƒ­ ìŠ¤íƒ€ì¼ */
        .tab.info.active {
            color: var(--accent-cyan);
            border-bottom-color: var(--accent-cyan);
        }

        .content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            display: none;
            flex-direction: column;
            gap: 20px;
        }

        .content.active {
            display: flex;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
        }

        .card {
            background: var(--bg-card);
            border-radius: 8px;
            padding: 20px;
            height: 110px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .card-label {
            font-size: 13px;
            color: #888;
            margin-bottom: 8px;
        }

        .card-value {
            font-size: 28px;
            font-weight: bold;
            color: #fff;
        }

        .console-box {
            flex: 1;
            background: var(--bg-console);
            border-radius: 8px;
            padding: 20px;
            font-family: 'Consolas', monospace;
            display: flex;
            flex-direction: column;
            min-height: 300px;
        }

        .logs {
            flex: 1;
            overflow-y: auto;
            font-size: 14px;
            line-height: 1.6;
            color: #ddd;
        }

        .cmd-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #fff;
            padding: 10px;
        }

        .action-bar {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: auto;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            color: #fff;
        }

        .btn-red {
            background: var(--accent-red);
        }

        .btn-blue {
            background: var(--accent-blue);
        }

        .btn-purple {
            background: var(--accent-purple);
        }

        .btn-yellow {
            background: var(--accent-gold);
            color: #000;
        }

        .env-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .env-btn {
            background: var(--bg-card);
            border: 1px solid #333;
            color: #ddd;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            transition: 0.2s;
        }

        .env-btn:hover {
            background: #333;
            border-color: var(--accent-blue);
            color: #fff;
            transform: translateY(-3px);
        }

        .env-btn i {
            font-size: 24px;
            color: var(--accent-blue);
        }

        .setting-card {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #333;
            margin-bottom: 15px;
        }

        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .setting-row span {
            font-size: 14px;
            color: #ddd;
        }

        .input-text {
            background: #111;
            border: 1px solid #444;
            color: #fff;
            padding: 6px 10px;
            border-radius: 4px;
            width: 200px;
            text-align: right;
        }

        .input-text.full-width {
            width: 100%;
            text-align: left;
            padding: 12px;
            margin-bottom: 10px;
        }

        .input-num {
            background: #111;
            border: 1px solid #444;
            color: #fff;
            padding: 6px 10px;
            border-radius: 4px;
            width: 80px;
            text-align: right;
        }

        .input-select {
            background: #111;
            border: 1px solid #444;
            color: #fff;
            padding: 6px 10px;
            border-radius: 4px;
            width: 120px;
            cursor: pointer;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 42px;
            height: 22px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #444;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--melon);
        }

        input:checked+.slider:before {
            transform: translateX(20px);
        }

        .player-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .player-card {
            background: var(--bg-card);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #333;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: 0.2s;
        }

        .player-card:hover {
            border-color: var(--accent-blue);
            background: #3a3a3a;
            transform: translateY(-2px);
        }

        .p-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            background: #444;
            background-size: cover;
        }

        .btn-xs {
            padding: 5px 10px;
            font-size: 12px;
            border-radius: 4px;
            cursor: pointer;
            border: 1px solid var(--accent-red);
            background: transparent;
            color: var(--accent-red);
            transition: 0.2s;
        }

        .btn-xs:hover {
            background: var(--accent-red);
            color: white;
        }

        #toast-container {
            position: fixed;
            top: 50px;
            right: 20px;
            z-index: 10001;
        }

        .toast {
            padding: 15px;
            background: #333;
            color: #fff;
            border-left: 5px solid var(--accent-blue);
            margin-bottom: 10px;
            border-radius: 5px;
            width: 300px;
        }

        .toast.success {
            border-color: var(--accent-green);
        }

        .toast.error {
            border-color: var(--accent-red);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: #252526;
            width: 450px;
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #444;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        .modal h3 {
            margin-top: 0;
            color: var(--text-main);
            margin-bottom: 20px;
        }

        .modal-label {
            display: block;
            font-size: 13px;
            color: #aaa;
            margin-bottom: 5px;
        }

        .modal-input {
            width: 100%;
            padding: 12px;
            background: #111;
            border: 1px solid #444;
            color: #fff;
            border-radius: 6px;
            margin-bottom: 15px;
        }

        .modal-btn-group {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .hidden {
            display: none;
        }

        .player-detail-modal {
            width: 600px;
            display: flex;
            gap: 20px;
        }

        .skin-view {
            width: 200px;
            background: #1e1e1e;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #333;
        }

        .p-detail-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .p-stat-row {
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }

        .p-stat-label {
            color: #888;
            font-size: 13px;
        }

        .p-stat-val {
            font-weight: bold;
        }

        .action-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: auto;
        }

        .act-btn {
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #444;
            background: #2a2a2a;
            color: #ccc;
            cursor: pointer;
            text-align: center;
            font-size: 13px;
        }

        .act-btn:hover {
            background: #333;
            color: #fff;
            border-color: var(--accent-blue);
        }

        .act-btn.danger {
            color: var(--accent-red);
            border-color: rgba(244, 67, 54, 0.3);
        }

        .act-btn.danger:hover {
            background: var(--accent-red);
            color: #fff;
        }

        .list-manager-modal {
            width: 500px;
            height: 600px;
            display: flex;
            flex-direction: column;
        }

        .list-box {
            flex: 1;
            background: #1e1e1e;
            border: 1px solid #333;
            border-radius: 6px;
            overflow-y: auto;
            margin-bottom: 15px;
            padding: 10px;
        }

        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid #2a2a2a;
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .list-btn-s {
            padding: 4px 8px;
            font-size: 11px;
            background: #333;
            border: 1px solid #444;
            color: #aaa;
            border-radius: 4px;
            cursor: pointer;
        }

        .list-btn-s:hover {
            background: var(--accent-red);
            color: white;
        }

        .plugin-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--bg-card);
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #333;
        }

        .plugin-info-area {
            flex: 1;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }
    </style>
</head>

<body>
    <div id="toast-container"></div>
    <aside class="sidebar">
        <div class="logo-area" data-i18n="title_launcher">SERVER<br>LAUNCHER</div>
        <div class="server-list" id="sidebarList"></div>
        <div class="sidebar-footer">
            <button class="btn-icon" onclick="openModal('launcherSettingsModal')"><i class="ph ph-gear"></i></button>
            <button class="btn-icon btn-new" onclick="openModal('eulaModal')"><i class="ph ph-plus"></i> &nbsp;<span
                    data-i18n="btn_new_server">ìƒˆ ì„œë²„</span></button>
        </div>
    </aside>

    <main class="main">
        <div id="emptyScreen" class="empty-screen"><i class="ph ph-arrow-elbow-down-left"></i>
            <h3 data-i18n="msg_select_server">ì„œë²„ë¥¼ ì„ íƒí•˜ì„¸ìš”</h3>
        </div>
        <div id="mainContent" class="main-content-wrapper">
            <div class="header">
                <div class="header-left">
                    <h2 id="headerTitle">Server Name</h2>
                </div>
                <div class="status-badge" id="statusBadge">
                    <div class="dot"></div> <span id="statusText">READY</span>
                </div>
            </div>
            <div class="tabs">
                <div class="tab active" onclick="switchTab('dashboard', this)" data-i18n="tab_dashboard">ëŒ€ì‹œë³´ë“œ</div>
                <div class="tab" onclick="switchTab('environment', this)" data-i18n="tab_env">ì„œë²„ ê´€ë¦¬</div>
                <div class="tab" onclick="switchTab('players', this)" data-i18n="tab_players">í”Œë ˆì´ì–´ ê´€ë¦¬</div>
                <div class="tab broadcast" onclick="switchTab('broadcast', this)">ğŸ“¢ ê´‘ê³ /ê³µì§€</div>
                <div class="tab" onclick="switchTab('settings', this)" data-i18n="tab_settings">ì „ì²´ ì„¤ì •</div>
                <div class="tab plugins" onclick="switchTab('plugins', this)">ğŸ§© í”ŒëŸ¬ê·¸ì¸</div>
                <div class="tab info" onclick="switchTab('info', this)" data-i18n="tab_info">â„¹ï¸ ì„œë²„ ì •ë³´</div>
                <div class="tab danger" onclick="switchTab('danger', this)" data-i18n="tab_danger">â›” ìœ„í—˜ êµ¬ê°„</div>
            </div>

            <div id="dashboard" class="content active">
                <div class="card-grid">
                    <div class="card">
                        <div class="card-label">CPU</div>
                        <div class="card-value" id="sysCpu">0%</div>
                    </div>
                    <div class="card">
                        <div class="card-label">RAM</div>
                        <div class="card-value" id="ramDisplay">2 GB</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="card_player">Player</div>
                        <div class="card-value"><span id="playerCount">0</span></div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="card_status">Status</div>
                        <div class="card-value" id="statusSimple" style="font-size:20px;">Stopped</div>
                    </div>
                    <div class="card">
                        <div class="card-label">Public IP</div>
                        <div class="card-value" id="publicIp" style="font-size:16px; word-break:break-all;">Checking...
                        </div>
                    </div>
                </div>
                <div class="console-box">
                    <div class="logs" id="logs"></div>
                    <div style="display:flex; border-top:1px solid #333; padding-top:10px;">
                        <span style="color:#2ba640; font-weight:bold; margin-right:10px;">></span>
                        <input type="text" class="cmd-input" id="cmdInput" placeholder="ëª…ë ¹ì–´ ì…ë ¥..."
                            data-i18n="ph_cmd_input">
                    </div>
                </div>
                <div class="action-bar">
                    <button class="btn btn-yellow hidden" id="btnRestart" onclick="askRestart()"
                        data-i18n="btn_restart">ì¬ì‹œì‘</button>
                    <button class="btn btn-red hidden" id="btnStop" onclick="askStop()" data-i18n="btn_stop">ì„œë²„
                        ì¢…ë£Œ</button>
                    <button class="btn btn-blue" id="btnStart" onclick="startServer()" data-i18n="btn_start">ì„œë²„
                        ì‹œì‘</button>
                </div>
            </div>

            <div id="environment" class="content">
                <h3 style="color:var(--accent-blue)" data-i18n="title_time">â° ì‹œê°„ ì œì–´</h3>
                <div class="env-grid">
                    <div class="env-btn" onclick="sendCommand('time set 0'); showToast('Time: Morning')"><i
                            class="ph ph-sun-horizon"></i><span data-i18n="env_morning">ì•„ì¹¨</span></div>
                    <div class="env-btn" onclick="sendCommand('time set 6000'); showToast('Time: Noon')"><i
                            class="ph ph-sun"></i><span data-i18n="env_noon">ì ì‹¬</span></div>
                    <div class="env-btn" onclick="sendCommand('time set 13000'); showToast('Time: Evening')"><i
                            class="ph ph-moon-stars"></i><span data-i18n="env_evening">ì €ë…</span></div>
                    <div class="env-btn" onclick="sendCommand('time set 18000'); showToast('Time: Night')"><i
                            class="ph ph-moon"></i><span data-i18n="env_night">ë°¤</span></div>
                </div>
                <h3 style="color:var(--melon); margin-top:30px;" data-i18n="title_weather">ğŸŒ¥ï¸ ë‚ ì”¨ ì œì–´</h3>
                <div class="env-grid">
                    <div class="env-btn" onclick="sendCommand('weather clear'); showToast('Weather: Clear')"><i
                            class="ph ph-sun"></i><span data-i18n="env_clear">ë§‘ìŒ</span></div>
                    <div class="env-btn" onclick="sendCommand('weather rain'); showToast('Weather: Rain')"><i
                            class="ph ph-cloud-rain"></i><span data-i18n="env_rain">ë¹„</span></div>
                    <div class="env-btn" onclick="sendCommand('weather thunder'); showToast('Weather: Thunder')"><i
                            class="ph ph-cloud-lightning"></i><span data-i18n="env_thunder">í­í’ìš°</span></div>
                    <div class="env-btn"
                        onclick="sendCommand('gamerule doWeatherCycle false'); showToast('Weather Cycle: OFF')"><i
                            class="ph ph-lock-key"></i><span data-i18n="env_lock">ë‚ ì”¨ ê³ ì •</span></div>
                </div>
                <h3 style="color:#ff9800; margin-top:30px;" data-i18n="title_difficulty">âš”ï¸ ë‚œì´ë„ ì œì–´</h3>
                <div class="env-grid">
                    <div class="env-btn"
                        onclick="sendCommand('difficulty peaceful'); showToast('Difficulty: Peaceful')"><i
                            class="ph ph-smiley"></i><span data-i18n="diff_peaceful">í‰í™”ë¡œì›€</span></div>
                    <div class="env-btn" onclick="sendCommand('difficulty easy'); showToast('Difficulty: Easy')"><i
                            class="ph ph-feather"></i><span data-i18n="diff_easy">ì‰¬ì›€</span></div>
                    <div class="env-btn" onclick="sendCommand('difficulty normal'); showToast('Difficulty: Normal')"><i
                            class="ph ph-shield"></i><span data-i18n="diff_normal">ë³´í†µ</span></div>
                    <div class="env-btn" onclick="sendCommand('difficulty hard'); showToast('Difficulty: Hard')"><i
                            class="ph ph-skull"></i><span data-i18n="diff_hard">ì–´ë ¤ì›€</span></div>
                </div>
            </div>

            <div id="players" class="content">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <h3 data-i18n="title_player_list">ì ‘ì†ì ëª©ë¡</h3>
                    <div style="display:flex; gap:10px;">
                        <button class="btn btn-blue" style="padding:8px 15px; font-size:12px;"
                            onclick="openListManager('whitelist')" data-i18n="btn_whitelist">í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬</button>
                        <button class="btn btn-red" style="padding:8px 15px; font-size:12px;"
                            onclick="openListManager('banlist')" data-i18n="btn_banlist">ì°¨ë‹¨ ëª©ë¡ ê´€ë¦¬</button>
                        <button class="btn btn-red" style="padding:8px 15px; font-size:12px; background:#8b0000;"
                            onclick="openListManager('ip-banlist')" data-i18n="btn_ip_banlist">IP ì°¨ë‹¨ ê´€ë¦¬</button>
                    </div>
                </div>
                <div id="playerList" class="player-list">
                    <div class="empty-msg" style="text-align:center;color:#666;" data-i18n="msg_no_players">ì ‘ì† ì¤‘ì¸ í”Œë ˆì´ì–´ê°€
                        ì—†ìŠµë‹ˆë‹¤.</div>
                </div>
            </div>

            <div id="broadcast" class="content">
                <h2 style="color:var(--accent-purple); margin-bottom:20px;" data-i18n="title_broadcast">ğŸ“¢ ê´‘ê³  / ê³µì§€ ë³´ë‚´ê¸°
                </h2>
                <p style="color:#aaa; font-size:14px; margin-bottom:30px;" data-i18n="desc_broadcast">ì„œë²„ì— ì ‘ì†í•œ ëª¨ë“  í”Œë ˆì´ì–´ì—ê²Œ
                    ë©”ì‹œì§€ë¥¼ ë„ì›ë‹ˆë‹¤.</p>
                <div class="setting-card" style="border-color:var(--accent-purple);">
                    <h3 style="color:var(--accent-purple);" data-i18n="lbl_bc_title">ğŸ–¥ï¸ í™”ë©´ ì¤‘ì•™ íƒ€ì´í‹€ (Title)</h3>
                    <div style="margin-bottom:10px; color:#ddd; font-size:13px;" data-i18n="desc_bc_title">ê°€ì¥ í¬ê²Œ ë³´ì´ëŠ”
                        ì œëª©ì…ë‹ˆë‹¤.</div>
                    <input type="text" id="bcTitleInput" class="input-text full-width"
                        placeholder="ì˜ˆ: í™˜ì˜í•©ë‹ˆë‹¤! / ì´ë²¤íŠ¸ ì‹œì‘!">
                    <div style="display:flex; justify-content:flex-end; gap:10px;">
                        <button class="btn" style="background:#333; border:1px solid #555;"
                            onclick="sendBroadcast('title_clear')" data-i18n="btn_bc_clear">ì§€ìš°ê¸°</button>
                        <button class="btn btn-purple" onclick="sendBroadcast('title')" data-i18n="btn_bc_send">ë³´ë‚´ê¸°
                            (Send)</button>
                    </div>
                </div>
                <div class="setting-card">
                    <h3 data-i18n="lbl_bc_subtitle">ğŸ“ ì„œë¸Œ íƒ€ì´í‹€ (Subtitle)</h3>
                    <div style="margin-bottom:10px; color:#ddd; font-size:13px;" data-i18n="desc_bc_subtitle">íƒ€ì´í‹€ ì•„ë˜ì— ì‘ê²Œ
                        ë‚˜ì˜¤ëŠ” ì„¤ëª…ì…ë‹ˆë‹¤. (íƒ€ì´í‹€ê³¼ í•¨ê»˜ ë³´ë‚¼ ë•Œ ì‚¬ìš©)
                    </div>
                    <input type="text" id="bcSubtitleInput" class="input-text full-width"
                        placeholder="ì˜ˆ: ì ì‹œ í›„ ê²Œì„ì´ ì‹œì‘ë©ë‹ˆë‹¤.">
                    <div style="display:flex; justify-content:flex-end;">
                        <button class="btn btn-blue" onclick="sendBroadcast('subtitle')" data-i18n="btn_bc_set">ì„¤ì •
                            (Set)</button>
                    </div>
                </div>
                <div class="setting-card">
                    <h3 style="color:var(--melon);" data-i18n="lbl_bc_actionbar">ğŸ’¬ ì•¡ì…˜ ë°” (Actionbar)</h3>
                    <div style="margin-bottom:10px; color:#ddd; font-size:13px;" data-i18n="desc_bc_actionbar">ì•„ì´í…œ ìŠ¬ë¡¯ ìœ„ì—
                        ì‘ê²Œ ëœ¨ëŠ” ë©”ì‹œì§€ì…ë‹ˆë‹¤.</div>
                    <input type="text" id="bcActionbarInput" class="input-text full-width" placeholder="ì˜ˆ: í˜„ì¬ ì¸ì› 5/10">
                    <div style="display:flex; justify-content:flex-end;">
                        <button class="btn" style="background:var(--melon); color:#000;"
                            onclick="sendBroadcast('actionbar')" data-i18n="btn_bc_send">ë³´ë‚´ê¸° (Send)</button>
                    </div>
                </div>
            </div>

            <div id="settings" class="content">
                <div style="text-align:right; margin-bottom:10px;"><button class="btn btn-blue" onclick="saveSettings()"
                        style="padding:10px 20px;" data-i18n="btn_save_settings">ğŸ’¾ ì„¤ì • ì €ì¥í•˜ê¸°</button></div>
                <div class="setting-card" style="border-color:var(--melon);">
                    <h3 style="color:var(--melon)" data-i18n="title_backup">ğŸ’¾ ë°±ì—… ì„¤ì •</h3>
                    <div class="setting-row">
                        <div data-i18n="set_auto_backup">ìë™ ë°±ì—… í™œì„±í™”</div><label class="switch"><input type="checkbox"
                                id="auto_backup"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_backup_interval">ë°±ì—… ì£¼ê¸° (ë¶„)</div><input type="number" id="backup_interval"
                            class="input-num" value="60">
                    </div>
                    <div style="text-align:right; margin-top:10px;"><button class="btn btn-blue"
                            onclick="triggerBackup()" data-i18n="btn_backup_now">ì§€ê¸ˆ ë°±ì—…í•˜ê¸°</button></div>
                </div>

                <div class="setting-card" style="border-color:var(--accent-blue); display:none;">
                    <h3 style="color:var(--accent-blue)" data-i18n="title_java">â˜• Java ì„¤ì •</h3>
                    <div class="setting-row">
                        <div data-i18n="set_java_path">ì‹¤í–‰ ê²½ë¡œ (java.exe)</div><input type="text" id="java_path"
                            class="input-text" style="width:350px; text-align:left;" placeholder="java">
                    </div>
                    <p style="font-size:12px; color:#888; margin-top:5px;" data-i18n="msg_java_tip">* 1.18 ì´ìƒì€ Java 17+,
                        ê·¸ ì´í•˜ëŠ” Java 8 ê¶Œì¥</p>
                </div>

                <div class="setting-card">
                    <h3 style="color:var(--melon)" data-i18n="title_general">ğŸ“ ì¼ë°˜ ì„¤ì •</h3>
                    <div class="setting-row">
                        <div data-i18n="set_motd">ì„œë²„ ì´ë¦„ (MOTD)</div><input type="text" id="motd" class="input-text"
                            style="width:300px;">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_server_port">ì„œë²„ í¬íŠ¸</div><input type="number" id="server-port"
                            class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_server_ip">ì„œë²„ IP</div><input type="text" id="server-ip" class="input-text">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_max_players">ìµœëŒ€ ì¸ì›</div><input type="number" id="max-players"
                            class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_online_mode">ì •í’ˆ ì¸ì¦</div><label class="switch"><input type="checkbox"
                                id="online-mode"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_white_list">í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸</div><label class="switch"><input type="checkbox"
                                id="white-list"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_enforce_whitelist">í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ê°•ì œ</div><label class="switch"><input
                                type="checkbox" id="enforce-whitelist"><span class="slider"></span></label>
                    </div>
                </div>
                <div class="setting-card">
                    <h3 data-i18n="title_performance">ğŸš€ ì„±ëŠ¥ ë° ë„¤íŠ¸ì›Œí¬</h3>
                    <div class="setting-row"><span><span data-i18n="set_ram">ë©”ëª¨ë¦¬ í• ë‹¹</span>: <span id="ramVal"
                                style="color:var(--melon); font-weight:bold;">2 GB</span></span><input type="range"
                            id="ramSlider" min="1" max="16" value="2" style="width: 200px; accent-color: var(--melon);"
                            oninput="updateRamLabel(this.value)"></div>
                    <div class="setting-row">
                        <div data-i18n="set_view_distance">ì‹œì•¼ ê±°ë¦¬</div><input type="number" id="view-distance"
                            class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_simulation_distance">ì—°ì‚° ê±°ë¦¬</div><input type="number"
                            id="simulation-distance" class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_max_tick_time">ìµœëŒ€ í‹± ì‹œê°„</div><input type="number" id="max-tick-time"
                            class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_network_compression_threshold">ë„¤íŠ¸ì›Œí¬ ì••ì¶• ì„ê³„ê°’</div><input type="number"
                            id="network-compression-threshold" class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_rate_limit">íŒ¨í‚· ì œí•œ</div><input type="number" id="rate-limit"
                            class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_use_native_transport">ë„¤ì´í‹°ë¸Œ ì „ì†¡ ì‚¬ìš©</div><label class="switch"><input
                                type="checkbox" id="use-native-transport"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_enable_status">ìƒíƒœ í‘œì‹œ í™œì„±í™”</div><label class="switch"><input type="checkbox"
                                id="enable-status"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_broadcast_rcon_to_ops">RCON ë¡œê·¸ ë°©ì†¡</div><label class="switch"><input
                                type="checkbox" id="broadcast-rcon-to-ops"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_broadcast_console_to_ops">ì½˜ì†” ë¡œê·¸ ë°©ì†¡</div><label class="switch"><input
                                type="checkbox" id="broadcast-console-to-ops"><span class="slider"></span></label>
                    </div>
                </div>
                <div class="setting-card">
                    <h3 data-i18n="title_world">ğŸŒ ì›”ë“œ ë° ìƒì„±</h3>
                    <div class="setting-row">
                        <div data-i18n="set_level_name">ì›”ë“œ í´ë”ëª…</div><input type="text" id="level-name"
                            class="input-text">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_level_seed">ì›”ë“œ ì‹œë“œ</div><input type="text" id="level-seed"
                            class="input-text">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_level_type">ì›”ë“œ íƒ€ì…</div><input type="text" id="level-type"
                            class="input-text">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_generator_settings">ìƒì„±ê¸° ì„¤ì •</div><input type="text" id="generator-settings"
                            class="input-text">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_max_world_size">ì›”ë“œ ìµœëŒ€ í¬ê¸°</div><input type="number" id="max-world-size"
                            class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_allow_nether">ë„¤ë”(ì§€ì˜¥) í—ˆìš©</div><label class="switch"><input type="checkbox"
                                id="allow-nether"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_generate_structures">êµ¬ì¡°ë¬¼ ìƒì„±</div><label class="switch"><input
                                type="checkbox" id="generate-structures"><span class="slider"></span></label>
                    </div>
                </div>
                <div class="setting-card">
                    <h3 data-i18n="title_gameplay">ğŸ® ê²Œì„ í”Œë ˆì´</h3>
                    <div class="setting-row">
                        <div data-i18n="set_gamemode">ê¸°ë³¸ ê²Œì„ëª¨ë“œ</div>
                        <select id="gamemode" class="input-select" style="width:150px;">
                            <option value="survival">ì„œë°”ì´ë²Œ (Survival)</option>
                            <option value="creative">í¬ë¦¬ì—ì´í‹°ë¸Œ (Creative)</option>
                            <option value="adventure">ëª¨í—˜ (Adventure)</option>
                            <option value="spectator">ê´€ì „ì (Spectator)</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_force_gamemode">ê²Œì„ëª¨ë“œ ê°•ì œ</div><label class="switch"><input type="checkbox"
                                id="force-gamemode"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_difficulty">ë‚œì´ë„</div>
                        <select id="difficulty" class="input-select" style="width:150px;">
                            <option value="peaceful">í‰í™”ë¡œì›€ (Peaceful)</option>
                            <option value="easy">ì‰¬ì›€ (Easy)</option>
                            <option value="normal">ë³´í†µ (Normal)</option>
                            <option value="hard">ì–´ë ¤ì›€ (Hard)</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_hardcore">í•˜ë“œì½”ì–´</div><label class="switch"><input type="checkbox"
                                id="hardcore"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_pvp">PVP í—ˆìš©</div><label class="switch"><input type="checkbox" id="pvp"><span
                                class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_allow_flight">ë¹„í–‰ í—ˆìš©</div><label class="switch"><input type="checkbox"
                                id="allow-flight"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_spawn_monsters">ëª¬ìŠ¤í„° ìŠ¤í°</div><label class="switch"><input type="checkbox"
                                id="spawn-monsters"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_spawn_animals">ë™ë¬¼ ìŠ¤í°</div><label class="switch"><input type="checkbox"
                                id="spawn-animals"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_spawn_npcs">NPC ìŠ¤í°</div><label class="switch"><input type="checkbox"
                                id="spawn-npcs"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_spawn_protection">ìŠ¤í° ë³´í˜¸ êµ¬ì—­</div><input type="number" id="spawn-protection"
                            class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_enable_command_block">ì»¤ë§¨ë“œ ë¸”ë¡ í—ˆìš©</div><label class="switch"><input
                                type="checkbox" id="enable-command-block"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_player_idle_timeout">ì ìˆ˜ ì¶”ë°© ì‹œê°„(ë¶„)</div><input type="number"
                            id="player-idle-timeout" class="input-num">
                    </div>
                </div>
                <div class="setting-card">
                    <h3 data-i18n="title_security">ğŸ”’ ë³´ì•ˆ ë° ê¸°íƒ€</h3>
                    <div class="setting-row">
                        <div data-i18n="set_op_permission_level">OP ê¶Œí•œ ë ˆë²¨</div><input type="number"
                            id="op-permission-level" class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_log_ips">IP ê¸°ë¡</div><label class="switch"><input type="checkbox"
                                id="log-ips"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_enforce_secure_profile">ë³´ì•ˆ í”„ë¡œí•„ ê°•ì œ</div><label class="switch"><input
                                type="checkbox" id="enforce-secure-profile"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_prevent_proxy_connections">í”„ë¡ì‹œ ì—°ê²° ë°©ì§€</div><label class="switch"><input
                                type="checkbox" id="prevent-proxy-connections"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_resource_pack">ë¦¬ì†ŒìŠ¤íŒ© URL</div><input type="text" id="resource-pack"
                            class="input-text">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_require_resource_pack">ë¦¬ì†ŒìŠ¤íŒ© ê°•ì œ</div><label class="switch"><input
                                type="checkbox" id="require-resource-pack"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_enable_rcon">RCON í™œì„±í™”</div><label class="switch"><input type="checkbox"
                                id="enable-rcon"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_rcon_port">RCON í¬íŠ¸</div><input type="number" id="rcon.port"
                            class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_rcon_password">RCON ë¹„ë°€ë²ˆí˜¸</div><input type="text" id="rcon.password"
                            class="input-text">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_enable_query">Query í™œì„±í™”</div><label class="switch"><input type="checkbox"
                                id="enable-query"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_query_port">Query í¬íŠ¸</div><input type="number" id="query.port"
                            class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_sync_chunk_writes">ì²­í¬ ë™ê¸°í™” ì €ì¥</div><label class="switch"><input
                                type="checkbox" id="sync-chunk-writes"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_enable_jmx_monitoring">JMX ëª¨ë‹ˆí„°ë§</div><label class="switch"><input
                                type="checkbox" id="enable-jmx-monitoring"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_entity_broadcast_range_percentage">ì—”í‹°í‹° ë°©ì†¡ ë²”ìœ„(%)</div><input type="number"
                            id="entity-broadcast-range-percentage" class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_max_chained_neighbor_updates">ìµœëŒ€ ì´ì›ƒ ì—…ë°ì´íŠ¸</div><input type="number"
                            id="max-chained-neighbor-updates" class="input-num">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_region_file_compression">ì²­í¬ ì••ì¶• ë°©ì‹</div><input type="text"
                            id="region-file-compression" class="input-text" style="width:100px;">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_accepts_transfers">ì„œë²„ ì´ë™ í—ˆìš©</div><label class="switch"><input
                                type="checkbox" id="accepts-transfers"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_bug_report_link">ë²„ê·¸ ë¦¬í¬íŠ¸ ë§í¬</div><input type="text" id="bug-report-link"
                            class="input-text">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_initial_enabled_packs">ì´ˆê¸° í™œì„± íŒ©</div><input type="text"
                            id="initial-enabled-packs" class="input-text">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_initial_disabled_packs">ì´ˆê¸° ë¹„í™œì„± íŒ©</div><input type="text"
                            id="initial-disabled-packs" class="input-text">
                    </div>
                    <div class="setting-row">
                        <div data-i18n="set_debug">ë””ë²„ê·¸ ëª¨ë“œ</div><label class="switch"><input type="checkbox"
                                id="debug"><span class="slider"></span></label>
                    </div>
                </div>
            </div>

            <div id="plugins" class="content">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <h3 style="color:var(--accent-orange)">ğŸ§© í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬</h3>
                    <button class="btn" style="background:var(--bg-card); border:1px solid #555;"
                        onclick="refreshPluginList()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
                </div>
                <p style="color:#888; font-size:13px; margin-top:-10px; margin-bottom:20px;">
                    ì„œë²„ í´ë”ì˜ plugins í´ë”ì— ìˆëŠ” .jar íŒŒì¼ ëª©ë¡ì…ë‹ˆë‹¤.<br>
                    í”ŒëŸ¬ê·¸ì¸ ì ìš© í›„ ì‹œìŠ¤í…œ íŠ¸ë ˆì´ì—ì„œ í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•˜ê³  ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.
                </p>
                <div id="pluginList" class="list-box"
                    style="height: 100%; background: transparent; border: none; overflow-y: auto;"></div>
            </div>

            <div id="info" class="content">
                <h2 style="color:var(--accent-cyan); margin-bottom:20px;" data-i18n="title_server_info">â„¹ï¸ ì„œë²„ ì •ë³´</h2>
                <div class="setting-card" style="border-color:var(--accent-cyan);">
                    <div class="setting-row">
                        <span data-i18n="info_created">ìƒì„± ì¼ì</span>
                        <span id="infoCreated" style="color:#fff; font-weight:bold;">-</span>
                    </div>
                    <div class="setting-row">
                        <span data-i18n="info_source">ë‹¤ìš´ë¡œë“œ ì¶œì²˜</span>
                        <span id="infoSource" style="color:#aaa; font-size:13px;">-</span>
                    </div>
                    <div class="setting-row">
                        <span data-i18n="info_size">ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰</span>
                        <span id="infoSize" style="color:var(--melon); font-weight:bold;">-</span>
                    </div>
                    <div class="setting-row">
                        <span data-i18n="info_java">Java ë²„ì „/ê²½ë¡œ</span>
                        <span id="infoJava"
                            style="color:#ddd; font-size:13px; word-break:break-all; text-align:right; width:60%;">-</span>
                    </div>
                    <div class="setting-row">
                        <span data-i18n="info_players">ë°©ë¬¸í•œ í”Œë ˆì´ì–´ ìˆ˜</span>
                        <span id="infoPlayers" style="color:var(--accent-blue); font-weight:bold;">-</span>
                    </div>
                </div>
            </div>

            <div id="danger" class="content">
                <div class="setting-card" style="border-color:#888;">
                    <h3 style="color:#fff;" data-i18n="title_folder_check">ğŸ“‚ íŒŒì¼ ìœ„ì¹˜ í™•ì¸</h3>
                    <p style="color:#aaa; font-size:13px;" data-i18n="desc_folder_check">ì„œë²„ íŒŒì¼ì´ë‚˜ ë°±ì—… íŒŒì¼ì´ ì €ì¥ëœ ì‹¤ì œ í´ë”ë¥¼ ì—½ë‹ˆë‹¤.
                    </p>
                    <div style="display:flex; gap:10px; margin-top:15px;">
                        <button class="btn" style="background:#333; border:1px solid #555;" onclick="openFolder('root')"
                            data-i18n="btn_open_server_folder">ğŸ“‚ ì„œë²„ í´ë” ì—´ê¸°</button>
                        <button class="btn" style="background:#333; border:1px solid #555;"
                            onclick="openFolder('backup')" data-i18n="btn_open_backup_folder">ğŸ’¾ ë°±ì—… í´ë” ì—´ê¸°</button>
                    </div>
                </div>
                <div class="setting-card"
                    style="border: 1px solid var(--accent-red); background: rgba(244, 67, 54, 0.05);">
                    <h3 style="color:var(--accent-red)" data-i18n="title_danger">ğŸš« ì„œë²„ ì‚­ì œ (Danger Zone)</h3>
                    <p style="color:#ccc; font-size:14px; line-height:1.6;" data-i18n="msg_danger">í˜„ì¬ ì„œë²„ë¥¼ ì˜êµ¬ ì‚­ì œí•©ë‹ˆë‹¤. ë³µêµ¬í• 
                        ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                    <div style="text-align:right; margin-top:20px;"><button class="btn btn-red"
                            onclick="askDeleteServer()" data-i18n="btn_delete_server">ğŸ—‘ï¸ ì„œë²„ ì˜êµ¬ ì‚­ì œ</button></div>
                </div>
            </div>
        </div>
    </main>

    <div id="eulaModal" class="modal-overlay">
        <div class="modal">
            <h3 data-i18n="modal_eula_title">âš–ï¸ EULA ë™ì˜</h3>
            <p style="color:#ddd; margin-bottom:20px; line-height:1.5;" data-i18n="msg_eula_content">...</p>
            <div class="modal-btn-group"><button class="btn" style="background:#333;" onclick="closeModal('eulaModal')"
                    data-i18n="btn_disagree">ê±°ì ˆ</button><button class="btn btn-blue"
                    onclick="closeModal('eulaModal'); openModal('newServerModal')" data-i18n="btn_agree">ë™ì˜í•©ë‹ˆë‹¤</button>
            </div>
        </div>
    </div>
    <div id="creditsModal" class="modal-overlay">
        <div class="modal" style="width: 500px;">
            <h3>ğŸ“œ Credits</h3>
            <div style="max-height: 400px; overflow-y: auto; font-size: 13px; line-height: 1.6; color: #ccc;">
                <h4 style="color:var(--melon); margin-bottom:5px;">Project</h4>
                <p><strong>NENE HELPER</strong><br>A lightweight and simple server generator for Minecraft.</p>
                <h4 style="color:var(--accent-blue); margin-top:15px; margin-bottom:5px;">Developers</h4>
                <ul style="padding-left: 20px; margin: 0;">
                    <li><strong>JIN</strong> - Director, Design, Development</li>
                    <li><strong>Hwisel</strong> - Information provision</li>
                    <li><strong>Google Gemini AI</strong> - Design, Development</li>
                </ul>
                <h4 style="color:var(--accent-green); margin-top:15px; margin-bottom:5px;">Tech Stack</h4>
                <ul style="padding-left: 20px; margin: 0;">
                    <li><strong>Python</strong> - Backend Runtime</li>
                    <li><strong>Eel</strong> - GUI Library (Chrome/Edge)</li>
                    <li><strong>HTML/CSS/JS</strong> - Frontend Interface</li>
                </ul>
                <h4 style="color:var(--accent-red); margin-top:15px; margin-bottom:5px;">Libraries & Resources</h4>
                <ul style="padding-left: 20px; margin: 0;">
                    <li><strong>psutil</strong> - System Monitoring (CPU/RAM)</li>
                    <li><strong>requests</strong> - API & Downloads</li>
                    <li><strong>Pretendard</strong> - Font (by Orion Cactus)</li>
                    <li><strong>Phosphor Icons</strong> - UI Icons</li>
                    <li><strong>PaperMC API</strong> - Server Core Distribution</li>
                    <li><strong>Minotar API</strong> - Player Skin Rendering</li>
                </ul>
                <p style="margin-top: 20px; font-size: 11px; color: #666; text-align: center;">Created with â¤ï¸ by JIN
                </p>
            </div>
            <div class="modal-btn-group"><button class="btn" style="background:#333;"
                    onclick="closeModal('creditsModal')">Close</button></div>
        </div>
    </div>
    <div id="playerDetailModal" class="modal-overlay">
        <div class="modal player-detail-modal">
            <div class="skin-view">
                <div
                    style="width:100%; height:100%; background:#333; display:flex; align-items:center; justify-content:center; color:#666;">
                    <i class="ph ph-user" style="font-size:64px;"></i>
                </div>
            </div>
            <div class="p-detail-content">
                <h2 id="pDetailName" style="margin:0;">PlayerName</h2>
                <p id="pDetailUUID" style="font-size:11px; color:#666; margin:0;">UUID: Unknown</p>
                <div style="margin-top:10px;">
                    <div class="p-stat-row"><span class="p-stat-label" data-i18n="modal_p_join">ì ‘ì† ì‹œê°„</span><span
                            class="p-stat-val" id="pDetailJoin">00:00:00</span></div>
                    <div class="p-stat-row"><span class="p-stat-label" data-i18n="modal_p_status">ìƒíƒœ</span><span
                            class="p-stat-val" style="color:var(--accent-green);">Online</span></div>
                </div>
                <div class="action-grid">
                    <div class="act-btn" onclick="openWhisperModal()"
                        style="border-color: var(--accent-blue); color: var(--accent-blue);" data-i18n="btn_whisper">ğŸ’¬
                        ê·“ì†ë§ (Whisper)</div>
                    <div class="act-btn" onclick="openTpModal()"
                        style="border-color: var(--melon); color: var(--melon);" data-i18n="btn_tp">ğŸš€ ì´ë™ (TP)</div>
                    <div class="act-btn" onclick="openGamemodeModal()"
                        style="grid-column: span 2; border-color: var(--accent-gold); color: var(--accent-gold);">ğŸ®
                        ê²Œì„ëª¨ë“œ ë³€ê²½ (Gamemode)</div>
                    <div class="act-btn" onclick="askAction('op', 'OP')" data-i18n="act_op">ê´€ë¦¬ì (OP)</div>
                    <div class="act-btn" onclick="askAction('deop', 'DEOP')" data-i18n="act_deop">ê¶Œí•œ í•´ì œ (DEOP)</div>
                    <div class="act-btn danger" onclick="askAction('kick', 'KICK')" data-i18n="act_kick">ì¶”ë°© (KICK)</div>
                    <div class="act-btn danger" onclick="openBanOptionModal()" data-i18n="act_ban">ì°¨ë‹¨ (BAN)</div>
                </div><button class="btn" style="background:#333; width:100%; margin-top:10px;"
                    onclick="closeModal('playerDetailModal')" data-i18n="btn_close">ë‹«ê¸°</button>
            </div>
        </div>
    </div>
    <div id="whisperModal" class="modal-overlay">
        <div class="modal">
            <h3 data-i18n="modal_whisper_title">ğŸ’¬ ê·“ì†ë§ ë³´ë‚´ê¸°</h3>
            <p style="color:#aaa; font-size:13px; margin-bottom:10px;">To: <b id="whisperTarget" style="color:#fff"></b>
            </p><input type="text" id="whisperInput" class="modal-input" placeholder="ë©”ì‹œì§€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."
                style="margin-bottom:20px;">
            <div class="modal-btn-group"><button class="btn" style="background:#333;"
                    onclick="closeModal('whisperModal')" data-i18n="btn_cancel">ì·¨ì†Œ</button><button class="btn btn-blue"
                    onclick="sendWhisperReal()" data-i18n="btn_bc_send">ë³´ë‚´ê¸°</button></div>
        </div>
    </div>
    <div id="tpModal" class="modal-overlay">
        <div class="modal" style="width:400px;">
            <h3 style="color:var(--melon);" data-i18n="modal_tp_title">ğŸš€ í…”ë ˆí¬íŠ¸ (TP)</h3>
            <p style="color:#aaa; font-size:13px;" data-i18n="msg_tp_ask">ëˆ„êµ¬ì—ê²Œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <div id="tpList" class="list-box" style="height: 250px;"></div>
            <div class="modal-btn-group"><button class="btn" style="background:#333;" onclick="closeModal('tpModal')"
                    data-i18n="btn_close">ë‹«ê¸°</button></div>
        </div>
    </div>
    <div id="gamemodeModal" class="modal-overlay">
        <div class="modal">
            <h3 style="color:var(--accent-gold);">ğŸ® ê²Œì„ëª¨ë“œ ë³€ê²½</h3>
            <p style="color:#aaa; font-size:13px; margin-bottom:20px;">ëŒ€ìƒ: <b id="gmTarget" style="color:#fff"></b></p>
            <div class="env-grid">
                <div class="env-btn" onclick="executeGamemode('survival')"><i class="ph ph-heart"></i><span>ì„œë°”ì´ë²Œ</span>
                </div>
                <div class="env-btn" onclick="executeGamemode('creative')"><i class="ph ph-cube"></i><span>í¬ë¦¬ì—ì´í‹°ë¸Œ</span>
                </div>
                <div class="env-btn" onclick="executeGamemode('adventure')"><i
                        class="ph ph-map-trifold"></i><span>ëª¨í—˜</span></div>
                <div class="env-btn" onclick="executeGamemode('spectator')"><i class="ph ph-eye"></i><span>ê´€ì „ì</span>
                </div>
            </div>
            <div class="modal-btn-group" style="margin-top:20px;"><button class="btn" style="background:#333;"
                    onclick="closeModal('gamemodeModal')" data-i18n="btn_cancel">ì·¨ì†Œ</button></div>
        </div>
    </div>
    <div id="banOptionModal" class="modal-overlay">
        <div class="modal">
            <h3 style="color:var(--accent-red);" data-i18n="modal_ban_opt_title">ğŸš« ì°¨ë‹¨ ì˜µì…˜ ì„ íƒ</h3>
            <p style="color:#ddd; margin-bottom:20px;" data-i18n="msg_ban_opt">ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì°¨ë‹¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <div style="display:flex; flex-direction:column; gap:10px;"><button class="btn"
                    style="background:#333; border:1px solid var(--accent-red); color:var(--accent-red);"
                    onclick="executeBan('name')" data-i18n="btn_ban_name">ë‹‰ë„¤ì„ ì°¨ë‹¨ (Name Ban)</button><button class="btn"
                    style="background:#333; border:1px solid var(--accent-red); color:var(--accent-red);"
                    onclick="executeBan('ip')" data-i18n="btn_ban_ip">IP ì°¨ë‹¨ (IP Ban)</button><button class="btn btn-red"
                    onclick="executeBan('both')" data-i18n="btn_ban_both">ë‘˜ ë‹¤ ì°¨ë‹¨ (Both)</button></div>
            <div class="modal-btn-group" style="margin-top:20px;"><button class="btn" style="background:#333;"
                    onclick="closeModal('banOptionModal')" data-i18n="btn_cancel">ì·¨ì†Œ</button></div>
        </div>
    </div>
    <div id="actionConfirmModal" class="modal-overlay">
        <div class="modal">
            <h3 data-i18n="modal_confirm_title">âš ï¸ ì‹¤í–‰ í™•ì¸</h3>
            <p id="actionConfirmText" style="color:#ddd; margin-bottom:20px;">Execute?</p>
            <div class="modal-btn-group"><button class="btn" style="background:#333;"
                    onclick="closeModal('actionConfirmModal')" data-i18n="btn_cancel">ì·¨ì†Œ</button><button
                    class="btn btn-blue" onclick="confirmAction()" data-i18n="btn_confirm">í™•ì¸</button></div>
        </div>
    </div>
    <div id="stopConfirmModal" class="modal-overlay">
        <div class="modal" style="border-color:var(--accent-red);">
            <h3 style="color:var(--accent-red);">âš ï¸ ì„œë²„ ì¢…ë£Œ í™•ì¸</h3>
            <p style="color:#ddd; margin-bottom:20px;">ì •ë§ ì„œë²„ë¥¼ ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <div class="modal-btn-group"><button class="btn" style="background:#333;"
                    onclick="closeModal('stopConfirmModal')" data-i18n="btn_cancel">ì·¨ì†Œ</button><button
                    class="btn btn-red" onclick="executeStop()">ì¢…ë£Œ</button></div>
        </div>
    </div>
    <div id="restartConfirmModal" class="modal-overlay">
        <div class="modal" style="border-color:var(--accent-gold);">
            <h3 style="color:var(--accent-gold);" data-i18n="modal_restart_title">ğŸ”„ ì„œë²„ ì¬ì‹œì‘ í™•ì¸</h3>
            <p style="color:#ddd; margin-bottom:20px;" data-i18n="msg_restart_confirm">ì •ë§ ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?<br>(ì¢…ë£Œ í›„ ë‹¤ì‹œ
                ì‹œì‘ë©ë‹ˆë‹¤)</p>
            <div class="modal-btn-group"><button class="btn" style="background:#333;"
                    onclick="closeModal('restartConfirmModal')" data-i18n="btn_cancel">ì·¨ì†Œ</button><button
                    class="btn btn-yellow" onclick="executeRestart()" data-i18n="btn_restart">ì¬ì‹œì‘</button></div>
        </div>
    </div>
    <div id="pluginDetailModal" class="modal-overlay">
        <div class="modal">
            <h3 style="color:var(--accent-orange);">ğŸ§© í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬</h3>
            <p id="plDetailName" style="color:#fff; font-weight:bold; margin-bottom:20px;">Filename</p>
            <p style="color:#aaa; font-size:13px; margin-bottom:20px;">ì´ í”ŒëŸ¬ê·¸ì¸ì„ ì„œë²„ì—ì„œ ì™„ì „íˆ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?<br>(ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤)</p>
            <div class="modal-btn-group">
                <button class="btn" style="background:#333;" onclick="closeModal('pluginDetailModal')"
                    data-i18n="btn_cancel">ì·¨ì†Œ</button>
                <button class="btn btn-red" onclick="confirmDeletePlugin()" data-i18n="btn_delete">ğŸ—‘ï¸ ì‚­ì œ
                    (Delete)</button>
            </div>
        </div>
    </div>

    <div id="listManagerModal" class="modal-overlay">
        <div class="modal list-manager-modal" style="width: 400px;">
            <h3 id="listTitle" data-i18n="modal_list_title">ëª©ë¡ ê´€ë¦¬</h3>
            <div style="display:flex; gap:5px; margin-bottom:10px;"><input type="text" id="listInput"
                    class="modal-input" style="margin:0;" placeholder="Nickname / IP" data-i18n="ph_nickname"><button
                    class="btn btn-blue" style="padding:0 15px;" onclick="addItemToList()"
                    data-i18n="btn_add">ì¶”ê°€</button></div>
            <div id="listContainer" class="list-box"></div>
            <div style="text-align:right;"><button class="btn" style="background:#333;"
                    onclick="closeModal('listManagerModal')" data-i18n="btn_close">ë‹«ê¸°</button></div>
        </div>
    </div>
    <div id="newServerModal" class="modal-overlay">
        <div class="modal">
            <h3 data-i18n="modal_new_title">âœ¨ ìƒˆ ì„œë²„ ìƒì„±</h3><label class="modal-label" data-i18n="modal_new_name">ì„œë²„
                ì´ë¦„</label><input type="text" id="newServerName" class="modal-input" placeholder="MyServer"
                oninput="cleanServerNameInput(this)"><label class="modal-label"
                data-i18n="modal_new_ver">ë²„ì „</label><select id="newServerVersion" class="modal-input">
                <option value="">Loading...</option>
            </select>
            <div class="modal-btn-group"><button class="btn" style="background:#333;"
                    onclick="closeModal('newServerModal')" data-i18n="btn_cancel">ì·¨ì†Œ</button><button
                    class="btn btn-blue" id="btnCreateReal" onclick="createNewServer()"
                    data-i18n="btn_create">ìƒì„±</button></div>
        </div>
    </div>
    <div id="launcherSettingsModal" class="modal-overlay">
        <div class="modal">
            <h3 data-i18n="modal_setting_title">âš™ï¸ ëŸ°ì²˜ ì„¤ì •</h3><label class="modal-label"
                data-i18n="modal_setting_mirror">ë¯¸ëŸ¬ URL</label><input type="text" id="mirrorUrlInput"
                class="modal-input" value="https://api.papermc.io/v2/projects/paper"><label class="modal-label"
                data-i18n="modal_setting_lang">ì–¸ì–´ (Language)</label><select id="langSelect" class="modal-input"
                onchange="changeLanguage(this.value)">
                <option value="ko">í•œêµ­ì–´ (Korean)</option>
                <option value="en">English</option>
                <option value="ja">æ—¥æœ¬èª (Japanese)</option>
                <option value="zh">ç®€ä½“ä¸­æ–‡ (Simplified Chinese)</option>
            </select>

            <label class="modal-label" style="margin-top:15px;">Java ì„¤ì •</label>
            <button class="btn"
                style="background: #2b2b2b; border: 1px solid #444; width: 100%; display:flex; justify-content:space-between; align-items:center;"
                onclick="openJavaManager()">
                <span>â˜• ì„¤ì¹˜ëœ ìë°” ê´€ë¦¬</span>
                <i class="ph ph-caret-right"></i>
            </button>

            <div style="margin-top: 15px; border-top: 1px solid #333; padding-top: 15px; text-align: center;"><button
                    class="btn" style="background: #333; width: 100%; border: 1px solid #444; color: #aaa;"
                    onclick="closeModal('launcherSettingsModal'); openModal('creditsModal')">ğŸ“œ Credits</button></div>
            <div class="modal-btn-group" style="margin-top: 15px;"><button class="btn" style="background:#333;"
                    onclick="closeModal('launcherSettingsModal')" data-i18n="btn_close">ë‹«ê¸°</button><button
                    class="btn btn-blue" onclick="saveLauncherSettings()" data-i18n="btn_save">ì €ì¥</button></div>
        </div>
    </div>
    <div id="deleteConfirmModal" class="modal-overlay">
        <div class="modal" style="border-color:var(--accent-red);">
            <h3 style="color:var(--accent-red)" data-i18n="modal_del_title">ğŸš« ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h3>
            <p style="color:#ddd;"><span data-i18n="modal_del_msg">ì„ íƒëœ ì„œë²„: </span><b id="delTargetName"
                    style="color:#fff"></b></p>
            <div class="modal-btn-group"><button class="btn" style="background:#333;"
                    onclick="closeModal('deleteConfirmModal')" data-i18n="btn_cancel">ì·¨ì†Œ</button><button
                    class="btn btn-red" onclick="confirmDeleteProcess()" data-i18n="btn_delete">ì œê±°</button></div>
        </div>
    </div>

    <div id="javaManagerModal" class="modal-overlay">
        <div class="modal" style="width: 500px;">
            <h3>â˜• ì„¤ì¹˜ëœ ìë°” ê´€ë¦¬</h3>
            <p style="color:#aaa; font-size:13px; margin-bottom:15px;">
                ëŸ°ì²˜ì—ì„œ ì‚¬ìš©í•  ê¸°ë³¸ ìë°” ë²„ì „ì„ ì„ íƒí•˜ì„¸ìš”.<br>
                ìƒˆë¡œìš´ ì„œë²„ë¥¼ ë§Œë“¤ ë•Œ ì´ ì„¤ì •ì´ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.<br>
                1.18 ì´ìƒì€ Java 17+, ê·¸ ì´í•˜ëŠ” Java 8 ê¶Œì¥
            </p>
            <div id="javaListContainer" class="list-box" style="height: 300px;">
                <div style="text-align:center; padding:20px; color:#666;">Loading...</div>
            </div>
            <div style="text-align:right; margin-top:15px;">
                <button class="btn" style="background:#333;" onclick="closeModal('javaManagerModal')">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <div id="javaApplyConfirmModal" class="modal-overlay">
        <div class="modal">
            <h3 style="color:var(--accent-green);">âš ï¸ ì„¤ì • ë³€ê²½ í™•ì¸</h3>
            <p style="color:#ddd; margin-bottom:20px;">
                ì •ë§ ì´ ìë°” ë²„ì „ìœ¼ë¡œ ê¸°ë³¸ ì„¤ì •ì„ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
            </p>
            <div class="modal-btn-group">
                <button class="btn" style="background:#333;" onclick="closeModal('javaApplyConfirmModal')">ì·¨ì†Œ</button>
                <button class="btn btn-blue" onclick="executeJavaPathChange()">í™•ì¸</button>
            </div>
        </div>
    </div>

    <div id="restartAppModal" class="modal-overlay">
        <div class="modal" style="border-color: var(--accent-gold);">
            <h3 style="color:var(--accent-gold);">âš ï¸ í”„ë¡œê·¸ë¨ ì¬ì‹œì‘ í•„ìš”</h3>
            <p style="color:#ddd; line-height: 1.6;">
                ìë°” ì„¤ì •ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
                ë³€ê²½ ì‚¬í•­ì„ ì™„ë²½í•˜ê²Œ ì ìš©í•˜ê¸° ìœ„í•´<br>
                <b>ì‹œìŠ¤í…œ íŠ¸ë ˆì´ì—ì„œ ì¢…ë£Œ í›„ ë‹¤ì‹œ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ì„¸ìš”.</b>
            </p>
            <div class="modal-btn-group">
                <button class="btn btn-yellow" onclick="closeModal('restartAppModal')">í™•ì¸</button>
            </div>
        </div>
    </div>

    <script>
        let currentSelectedServerName = "", currentLang = "ko", currentTranslations = {}, globalPlayerList = [];
        window.onload = async function () { await eel.init_system_py()(); await checkSystem(); await loadLauncherConfig(); refreshServerList(); loadVersionList(); };
        async function tryCloseApp() { const r = await eel.try_close_app_py()(); if (r === "blocked") { showToast(currentTranslations["msg_cannot_close"] || "âš ï¸ Server is running!", "error"); } else { window.close(); } }
        async function loadLauncherConfig() { const c = await eel.get_launcher_config_py()(); if (c) { if (c.language) await changeLanguage(c.language); if (c.mirror_url) document.getElementById('mirrorUrlInput').value = c.mirror_url; document.getElementById('langSelect').value = currentLang; } }
        async function saveLauncherSettings() { const l = document.getElementById('langSelect').value; const m = document.getElementById('mirrorUrlInput').value; await eel.save_launcher_config_py({ "language": l, "mirror_url": m })(); showToast("Saved", "success"); closeModal('launcherSettingsModal'); }
        async function changeLanguage(c) { currentLang = c; currentTranslations = await eel.get_translation_py(c)(); if (!currentTranslations) return; document.querySelectorAll('[data-i18n]').forEach(e => { const k = e.getAttribute('data-i18n'); if (currentTranslations[k]) { if (e.tagName === 'INPUT' || e.tagName === 'TEXTAREA') e.placeholder = currentTranslations[k]; else e.innerHTML = currentTranslations[k]; } }); }
        async function loadVersionList() { const s = document.getElementById('newServerVersion'); const v = await eel.get_papermc_versions()(); if (v && v.length > 0) { s.innerHTML = ""; v.forEach(i => s.innerHTML += `<option value="${i}">${i}</option>`); } else { s.innerHTML = `<option value="1.21.1">1.21.1</option><option value="1.20.4">1.20.4</option>`; } }
        async function checkSystem() { await eel.check_java_status()(); }
        async function refreshServerList() { let s = await eel.get_server_list_py()(); let l = document.getElementById('sidebarList'); l.innerHTML = ""; s.forEach(i => { const a = (i.name === currentSelectedServerName) ? "active" : ""; l.innerHTML += `<div class="server-item ${a}" onclick="selectServer('${i.name}', this)"><h4>${i.name}</h4><p><span style="color:${i.status === 'Running' ? 'var(--accent-green)' : '#777'}">${i.status}</span><span style="color:#666; margin-left:5px; font-size:11px;">${i.version}</span></p></div>`; }); }
        async function selectServer(n, e) { currentSelectedServerName = n; document.getElementById('logs').innerHTML = ""; document.getElementById('emptyScreen').style.display = 'none'; document.getElementById('mainContent').classList.add('active'); document.querySelectorAll('.server-item').forEach(i => i.classList.remove('active')); if (e) e.classList.add('active'); document.getElementById('headerTitle').innerText = n; await eel.select_server_py(n)(); loadSettings(); }
        async function createNewServer() { let n = document.getElementById('newServerName').value; let v = document.getElementById('newServerVersion').value; let m = document.getElementById('mirrorUrlInput').value; let b = document.getElementById('btnCreateReal'); if (!n) return showToast("Name required", "error"); b.disabled = true; b.innerText = "..."; let r = await eel.create_new_server_real(n, v, m)(); b.disabled = false; changeLanguage(currentLang); closeModal('newServerModal'); if (r.includes("âœ…")) { showToast("Success", "success"); refreshServerList(); } else showToast(r, "error"); }
        let serverToDelete = "";
        function askDeleteServer() { let n = document.getElementById('headerTitle').innerText; serverToDelete = n; document.getElementById('delTargetName').innerText = n; openModal('deleteConfirmModal'); }
        async function confirmDeleteProcess() { closeModal('deleteConfirmModal'); let r = await eel.delete_server_real(serverToDelete)(); if (r.includes("âœ…")) { showToast("Deleted", "success"); document.getElementById('emptyScreen').style.display = 'flex'; document.getElementById('mainContent').classList.remove('active'); refreshServerList(); } else { showToast(r, "error"); } }
        const checkboxSettings = ['allow-flight', 'allow-nether', 'broadcast-console-to-ops', 'broadcast-rcon-to-ops', 'debug', 'enable-command-block', 'enable-jmx-monitoring', 'enable-query', 'enable-rcon', 'enable-status', 'enforce-secure-profile', 'enforce-whitelist', 'force-gamemode', 'generate-structures', 'hardcore', 'hide-online-players', 'log-ips', 'online-mode', 'prevent-proxy-connections', 'pvp', 'require-resource-pack', 'spawn-animals', 'spawn-monsters', 'spawn-npcs', 'sync-chunk-writes', 'use-native-transport', 'white-list', 'accepts-transfers', 'auto_backup'];
        const textSettings = ['java_path', 'motd', 'max-players', 'server-port', 'server-ip', 'view-distance', 'simulation-distance', 'max-tick-time', 'network-compression-threshold', 'rate-limit', 'max-world-size', 'level-name', 'level-seed', 'level-type', 'generator-settings', 'gamemode', 'difficulty', 'spawn-protection', 'player-idle-timeout', 'op-permission-level', 'resource-pack', 'rcon.port', 'rcon.password', 'query.port', 'entity-broadcast-range-percentage', 'max-chained-neighbor-updates', 'region-file-compression', 'bug-report-link', 'initial-enabled-packs', 'initial-disabled-packs', 'backup_interval'];
        async function loadSettings() { let p = await eel.load_properties_py()(); if (!p) return; checkboxSettings.forEach(i => { const e = document.getElementById(i); if (e) e.checked = (p[i] === 'true' || p[i] === true); }); textSettings.forEach(i => { const e = document.getElementById(i); if (e && p[i]) e.value = String(p[i]).replace(/\\:/g, ":"); }); const j = document.getElementById('java_path'); if (p['java_path']) j.value = p['java_path']; else j.value = "java"; }
        async function saveSettings() { let d = {}; checkboxSettings.forEach(i => { const e = document.getElementById(i); if (e) d[i] = e.checked; }); textSettings.forEach(i => { const e = document.getElementById(i); if (e) d[i] = e.value; }); await eel.save_properties_py(d)(); showToast("Saved", "success"); }
        function openModal(id) { document.getElementById(id).style.display = 'flex'; setTimeout(() => document.getElementById(id).classList.add('show'), 10); }
        function closeModal(id) { document.getElementById(id).classList.remove('show'); setTimeout(() => document.getElementById(id).style.display = 'none', 300); }
        function updateRamLabel(v) { document.getElementById('ramVal').innerText = v + " GB"; document.getElementById('ramDisplay').innerText = v + " GB"; }

        async function startServer() {
            let ram = document.getElementById('ramSlider').value;
            document.getElementById('btnStart').classList.add('hidden');
            document.getElementById('btnStop').classList.remove('hidden');
            document.getElementById('btnRestart').classList.remove('hidden');
            document.getElementById('statusText').innerText = "LOADING...";
            showToast("Starting...", "info");

            if (eel.get_public_ip_py) {
                document.getElementById('publicIp').innerText = "Checking...";
                let ip = await eel.get_public_ip_py()();
                document.getElementById('publicIp').innerText = ip;
            }

            let r = await eel.start_server_py(ram)();
            if (r.includes("âŒ") || r.includes("âš ï¸")) { showToast(r, "error"); update_status_js(false); }
            else setTimeout(refreshServerList, 1000);
        }

        function switchTab(id, btn) {
            document.querySelectorAll('.content').forEach(e => e.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(e => e.classList.remove('active'));
            document.getElementById(id).classList.add('active'); btn.classList.add('active');
            if (id === 'settings') loadSettings();
            if (id === 'plugins') refreshPluginList();
            // [ì¶”ê°€ë¨] ì •ë³´ íƒ­ í´ë¦­ ì‹œ ë¡œë“œ
            if (id === 'info') loadServerInfo();
        }

        function sendCommand(c) { eel.send_command_py(c); }
        document.getElementById('cmdInput').addEventListener('keypress', (e) => { if (e.key === 'Enter' && e.target.value.trim() !== "") { sendCommand(e.target.value); e.target.value = ""; } });
        async function triggerBackup() { if (!currentSelectedServerName) return; await eel.trigger_backup_py(currentSelectedServerName)(); showToast("Backup Started", "info"); }
        eel.expose(update_player_list_js);
        function update_player_list_js(p) { globalPlayerList = p; const l = document.getElementById('playerList'); l.innerHTML = ""; if (document.getElementById('playerCount')) document.getElementById('playerCount').innerText = p.length; if (p.length === 0) { l.innerHTML = `<div class="empty-msg" style="text-align:center;color:#666;">${currentTranslations["msg_no_players"] || "No players."}</div>`; return; } p.forEach(n => { l.innerHTML += `<div class="player-card" onclick="openPlayerDetail('${n}')"><div class="p-info"><div class="avatar" style="background:#444;"></div><div style="font-weight:bold;">${n}</div></div><div style="font-size:12px; color:var(--accent-green);">â— Online</div></div>`; }); }
        let currentDetailPlayer = "";
        async function openPlayerDetail(n) { currentDetailPlayer = n; document.getElementById('pDetailName').innerText = n; document.getElementById('pDetailJoin').innerText = "..."; document.getElementById('pDetailUUID').innerText = "..."; openModal('playerDetailModal'); const i = await eel.get_player_detail_py(n)(); if (i) { document.getElementById('pDetailJoin').innerText = i.join_time; document.getElementById('pDetailUUID').innerText = "UUID: " + i.uuid; } }
        let pendingAction = null; let pendingTarget = "";
        function askAction(a, d) { pendingAction = a; pendingTarget = currentDetailPlayer; document.getElementById('actionConfirmText').innerHTML = `${currentTranslations.modal_del_msg} <b style="color:white">${pendingTarget}</b><br>Action: <b>${d}</b>`; openModal('actionConfirmModal'); }
        async function confirmAction() { closeModal('actionConfirmModal'); if (!pendingAction || !pendingTarget) return; let c = ""; if (pendingAction === 'op') c = `op ${pendingTarget}`; else if (pendingAction === 'deop') c = `deop ${pendingTarget}`; else if (pendingAction === 'kick') c = `kick ${pendingTarget} Kicked`; else if (pendingAction === 'ban') c = `ban ${pendingTarget} Banned`; if (c) { await eel.execute_command_py(c)(); showToast("Command Sent", "success"); if (pendingAction === 'kick' || pendingAction === 'ban') closeModal('playerDetailModal'); } pendingAction = null; }
        let currentListType = "";
        async function openListManager(t) { currentListType = t; const tr = currentTranslations; if (t === 'whitelist') document.getElementById('listTitle').innerText = tr.btn_whitelist; else if (t === 'banlist') document.getElementById('listTitle').innerText = tr.btn_banlist; else document.getElementById('listTitle').innerText = "IP ì°¨ë‹¨ ê´€ë¦¬"; document.getElementById('listInput').value = ""; openModal('listManagerModal'); await refreshListManager(); }
        async function refreshListManager() { const c = document.getElementById('listContainer'); c.innerHTML = "..."; const l = await eel.get_manage_list_py(currentListType)(); c.innerHTML = ""; if (l.length === 0) { c.innerHTML = "<div style='color:#666; text-align:center; padding:20px;'>Empty</div>"; return; } const tr = currentTranslations; const b = tr.btn_delete || "Delete"; l.forEach(n => { let ct = 'remove'; if (currentListType === 'banlist') ct = 'pardon'; else if (currentListType === 'ip-banlist') ct = 'pardon-ip'; const d = document.createElement('div'); d.className = 'list-item'; d.innerHTML = `<span>${n}</span> <button class="list-btn-s" onclick="modifyList('${ct}', '${n}')">${b}</button>`; c.appendChild(d); }); }
        async function addItemToList() { const n = document.getElementById('listInput').value; if (!n) return; let c = ""; if (currentListType === 'whitelist') c = `whitelist add ${n}`; else if (currentListType === 'banlist') c = `ban ${n}`; else if (currentListType === 'ip-banlist') c = `ban-ip ${n}`; eel.send_command_py(c); document.getElementById('listInput').value = ""; showToast("Added", "info"); setTimeout(refreshListManager, 1000); }
        async function modifyList(a, n) { let c = ""; if (a === 'remove') c = `whitelist remove ${n}`; else if (a === 'pardon') c = `pardon ${n}`; else if (a === 'pardon-ip') c = `pardon-ip ${n}`; eel.send_command_py(c); showToast("Removed", "info"); setTimeout(refreshListManager, 1000); }
        eel.expose(update_status_js);
        function update_status_js(isOn) {
            if (isOn) {
                document.getElementById('statusText').innerText = "ONLINE"; document.getElementById('statusSimple').innerText = "Running"; document.getElementById('statusSimple').style.color = "#2ba640";
                document.getElementById('btnStart').classList.add('hidden'); document.getElementById('btnStop').classList.remove('hidden'); document.getElementById('btnRestart').classList.remove('hidden');
                if (eel.get_public_ip_py) eel.get_public_ip_py()().then(ip => document.getElementById('publicIp').innerText = ip);
            } else {
                document.getElementById('statusText').innerText = "OFFLINE"; document.getElementById('statusSimple').innerText = "Stopped"; document.getElementById('statusSimple').style.color = "#fff";
                document.getElementById('btnStart').classList.remove('hidden'); document.getElementById('btnStop').classList.add('hidden'); document.getElementById('btnRestart').classList.add('hidden');
            }
            refreshServerList();
        }
        eel.expose(add_log_js);
        function add_log_js(m) { const l = document.getElementById('logs'); l.innerHTML += `<div>${m}</div>`; l.scrollTop = l.scrollHeight; }
        eel.expose(restore_logs_js);
        function restore_logs_js(arr) { const l = document.getElementById('logs'); l.innerHTML = ""; arr.forEach(m => l.innerHTML += `<div>${m}</div>`); l.scrollTop = l.scrollHeight; }
        eel.expose(showToast);
        function showToast(m, t = 'info') { const c = document.getElementById('toast-container'); const e = document.createElement('div'); e.className = `toast ${t}`; e.innerText = m; c.appendChild(e); setTimeout(() => e.remove(), 3000); }
        eel.expose(update_cpu_usage_js);
        function update_cpu_usage_js(p) { const e = document.getElementById('sysCpu'); if (e) e.innerText = p + "%"; }
        eel.expose(update_download_progress_js);
        function update_download_progress_js(t) { const b = document.getElementById('btnCreateReal'); if (b) b.innerText = t.includes('%') ? `... ${t}%` : t; }
        function openWhisperModal() { document.getElementById('whisperTarget').innerText = currentDetailPlayer; document.getElementById('whisperInput').value = ""; openModal('whisperModal'); }
        function sendWhisperReal() { let m = document.getElementById('whisperInput').value; if (!m) return showToast("ë‚´ìš© ì…ë ¥", "error"); eel.send_command_py(`tell ${currentDetailPlayer} ${m}`); showToast("ì „ì†¡ ì™„ë£Œ", "success"); closeModal('whisperModal'); }
        function sendBroadcast(t) { let m = "", c = ""; if (t === 'title') { m = document.getElementById('bcTitleInput').value; c = `title @a title "${m}"`; } else if (t === 'subtitle') { m = document.getElementById('bcSubtitleInput').value; c = `title @a subtitle "${m}"`; } else if (t === 'actionbar') { m = document.getElementById('bcActionbarInput').value; c = `title @a actionbar "${m}"`; } else if (t === 'title_clear') { c = `title @a clear`; document.getElementById('bcTitleInput').value = ""; } if (c) eel.send_command_py(c); showToast("ì „ì†¡/ì„¤ì • ì™„ë£Œ", "success"); }
        async function openFolder(t) { if (!currentSelectedServerName) return; await eel.open_folder_py(currentSelectedServerName, t)(); showToast("í´ë” ì—´ë¦¼", "success"); }
        function openTpModal() { const t = globalPlayerList.filter(p => p !== currentDetailPlayer); const c = document.getElementById('tpList'); c.innerHTML = ""; if (t.length === 0) { c.innerHTML = "<div style='text-align:center; color:#666;'>ì—†ìŒ</div>"; } else { t.forEach(n => { c.innerHTML += `<div class="list-item"><span>${n}</span> <button class="list-btn-s" onclick="teleportTo('${n}')">ì´ë™</button></div>`; }); } openModal('tpModal'); }
        function teleportTo(t) { eel.send_command_py(`tp ${currentDetailPlayer} ${t}`); showToast("ì´ë™í•¨", "success"); closeModal('tpModal'); }
        function openBanOptionModal() { closeModal('playerDetailModal'); openModal('banOptionModal'); }
        async function executeBan(t) { let c = ""; const tg = currentDetailPlayer; if (t === 'name') c = `ban ${tg} Banned`; else if (t === 'ip') c = `ban-ip ${tg} IP Banned`; else if (t === 'both') { await eel.execute_command_py(`ban ${tg}`); await eel.execute_command_py(`ban-ip ${tg}`); closeModal('banOptionModal'); return; } if (c) eel.execute_command_py(c); closeModal('banOptionModal'); }
        function openGamemodeModal() { document.getElementById('gmTarget').innerText = currentDetailPlayer; openModal('gamemodeModal'); }
        function executeGamemode(m) { eel.send_command_py(`gamemode ${m} ${currentDetailPlayer}`); closeModal('gamemodeModal'); }
        function cleanServerNameInput(i) { i.value = i.value.replace(/[<>:"/\\|?*]/g, ''); }
        function askStop() { openModal('stopConfirmModal'); }
        function executeStop() { sendCommand('stop'); closeModal('stopConfirmModal'); }
        function askRestart() { openModal('restartConfirmModal'); }
        function executeRestart() { sendCommand('stop'); showToast("Restarting...", "info"); closeModal('restartConfirmModal'); setTimeout(() => startServer(), 5000); }

        async function refreshPluginList() {
            const container = document.getElementById('pluginList');
            container.innerHTML = "...";
            const list = await eel.get_plugin_list_py()();
            container.innerHTML = "";

            if (list.length === 0) {
                container.innerHTML = "<div style='text-align:center; color:#666; padding:20px;'>No plugins found.</div>";
                return;
            }

            list.forEach(p => {
                const div = document.createElement('div');
                div.className = 'plugin-item';

                const infoArea = document.createElement('div');
                infoArea.className = 'plugin-info-area';
                infoArea.onclick = () => openPluginDetail(p.filename);
                infoArea.innerHTML = `<i class="ph ph-plug" style="color:var(--accent-orange); font-size:20px;"></i> <span>${p.name}</span>`;

                const switchLabel = document.createElement('label');
                switchLabel.className = 'switch';
                const input = document.createElement('input');
                input.type = 'checkbox';
                input.checked = p.enabled;
                input.onchange = () => togglePlugin(p.filename, input.checked);

                const slider = document.createElement('span');
                slider.className = 'slider';

                switchLabel.appendChild(input);
                switchLabel.appendChild(slider);

                div.appendChild(infoArea);
                div.appendChild(switchLabel);
                container.appendChild(div);
            });
        }

        async function togglePlugin(filename, isChecked) {
            const res = await eel.toggle_plugin_py(filename, isChecked)();
            if (res.includes("âœ…")) {
                showToast(res, "success");
                refreshPluginList();
            } else {
                showToast(res, "error");
                refreshPluginList();
            }
        }

        let currentPluginFile = "";
        function openPluginDetail(filename) {
            currentPluginFile = filename;
            document.getElementById('plDetailName').innerText = filename;
            openModal('pluginDetailModal');
        }

        async function confirmDeletePlugin() {
            closeModal('pluginDetailModal');
            const res = await eel.delete_plugin_py(currentPluginFile)();
            if (res.includes("âœ…")) {
                showToast("Plugin Deleted", "success");
                refreshPluginList();
            } else {
                showToast(res, "error");
            }
        }

        // [ì¶”ê°€ë¨] ì„œë²„ ì •ë³´ ë¡œë“œ í•¨ìˆ˜
        async function loadServerInfo() {
            const info = await eel.get_server_extended_info_py()();
            if (info) {
                document.getElementById('infoCreated').innerText = info.created_at;
                document.getElementById('infoSource').innerText = info.source_url;
                document.getElementById('infoSize').innerText = info.disk_usage;
                document.getElementById('infoJava').innerText = info.java_version;
                document.getElementById('infoPlayers').innerText = info.player_count + " ëª…";
            }
        }

        // [ì¶”ê°€ë¨] ìë°” ê´€ë¦¬ì ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸
        async function openJavaManager() {
            // ì„œë²„ ì‹¤í–‰ ì¤‘ ì²´í¬
            const isRunning = await eel.check_any_server_running_py()();
            if (isRunning) {
                showToast("âš ï¸ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤ (Running)", "error");
                return;
            }

            closeModal('launcherSettingsModal');
            openModal('javaManagerModal');
            loadJavaList();
        }

        async function loadJavaList() {
            const container = document.getElementById('javaListContainer');
            container.innerHTML = "<div style='text-align:center; padding:20px; color:#666;'>ê²€ìƒ‰ ì¤‘... (Scanning)</div>";

            const list = await eel.scan_java_versions_py()();
            container.innerHTML = "";

            if (list.length === 0) {
                container.innerHTML = "<div style='text-align:center; padding:20px; color:#666;'>ìë°”ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>";
                return;
            }

            list.forEach(java => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.style.padding = "15px";
                item.style.flexDirection = "column";
                item.style.alignItems = "flex-start";
                item.style.gap = "5px";

                // ìŠ¤íƒ€ì¼ ë¶„ê¸°
                let statusHtml = "";
                let btnHtml = "";
                let bgStyle = "";

                if (java.is_current) {
                    bgStyle = "background: rgba(43, 166, 64, 0.1); border: 1px solid var(--accent-green);";
                    statusHtml = `<span style="font-size:11px; color:var(--accent-green); font-weight:bold; margin-bottom:5px;">â— ì‚¬ìš© ì¤‘ (In Use)</span>`;
                    btnHtml = `<span style="font-size:12px; color:#666;">í˜„ì¬ ì„¤ì •ë¨</span>`;
                } else {
                    bgStyle = "";
                    statusHtml = `<span style="font-size:11px; color:#888;">ì„¤ì¹˜ë¨ (Installed)</span>`;
                    btnHtml = `<button class="btn btn-blue" style="padding: 5px 12px; font-size:12px;" onclick="applyJavaPath('${java.path.replace(/\\/g, '\\\\')}')">ì ìš©í•˜ê¸°</button>`;
                }

                item.style.cssText += bgStyle;

                item.innerHTML = `
                    <div style="width:100%; display:flex; justify-content:space-between; align-items:start;">
                        <div>
                            ${statusHtml}
                            <div style="font-weight:bold; font-size:15px; color:#fff;">Java ${java.version}</div>
                            <div style="font-size:12px; color:#aaa; margin-top:3px; word-break:break-all;">${java.path}</div>
                        </div>
                        <div style="margin-top: 5px;">
                            ${btnHtml}
                        </div>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        let pendingJavaPath = ""; // [ì¶”ê°€ë¨] ì„ íƒëœ ìë°” ê²½ë¡œ ì„ì‹œ ì €ì¥

        function applyJavaPath(path) {
            // ê¸°ì¡´ confirm() ëŒ€ì‹  HTML ëª¨ë‹¬ ì‚¬ìš©
            pendingJavaPath = path;
            openModal('javaApplyConfirmModal');
        }

        async function executeJavaPathChange() {
            closeModal('javaApplyConfirmModal');
            if (!pendingJavaPath) return;

            const res = await eel.set_global_java_py(pendingJavaPath)();
            if (res.includes("Running")) {
                showToast("âš ï¸ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤!", "error");
            } else if (res.includes("âœ…")) {
                closeModal('javaManagerModal');
                openModal('restartAppModal'); // ì¬ì‹œì‘ ì•ˆë‚´ íŒì—…
            } else {
                showToast(res, "error");
            }
        }
    </script>
</body>

</html>